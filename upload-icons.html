<!DOCTYPE html>
<html>
<head>
    <title>ä¸Šä¼  PNG å›¾æ ‡</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            max-width: 800px; 
            margin: 0 auto;
        }
        .upload-area {
            border: 2px dashed #ccc;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
            background: #f9f9f9;
        }
        .upload-area.dragover {
            border-color: #667eea;
            background: #f0f4ff;
        }
        .file-list {
            margin: 20px 0;
        }
        .file-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 1px solid #ddd;
            margin: 5px 0;
            border-radius: 5px;
            background: white;
        }
        .file-preview {
            width: 32px;
            height: 32px;
            margin-right: 10px;
            border: 1px solid #ccc;
        }
        .generate-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
        }
        .generate-btn:hover {
            background: #5a6fd8;
        }
        .code-output {
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        .copy-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        .step {
            background: #e9ecef;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
    </style>
</head>
<body>
    <h1>ğŸ“š ç”Ÿè¯æœ¬ PWA å›¾æ ‡ä¸Šä¼ å·¥å…·</h1>
    
    <div class="step">
        <h3>æ­¥éª¤ 1: ç”Ÿæˆå›¾æ ‡æ–‡ä»¶</h3>
        <p>å¦‚æœæ‚¨è¿˜æ²¡æœ‰ç”Ÿæˆå›¾æ ‡ï¼Œè¯·å…ˆï¼š</p>
        <button class="generate-btn" onclick="window.open('create-basic-icons.html', '_blank')">
            æ‰“å¼€å›¾æ ‡ç”Ÿæˆå™¨
        </button>
    </div>
    
    <div class="step">
        <h3>æ­¥éª¤ 2: ä¸Šä¼ å›¾æ ‡æ–‡ä»¶</h3>
        <p>å°†ä¸‹è½½çš„ PNG å›¾æ ‡æ–‡ä»¶æ‹–æ‹½åˆ°ä¸‹é¢çš„åŒºåŸŸï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶ï¼š</p>
        
        <div class="upload-area" id="uploadArea">
            <p>ğŸ“ æ‹–æ‹½ PNG å›¾æ ‡æ–‡ä»¶åˆ°è¿™é‡Œ</p>
            <p>æˆ–</p>
            <input type="file" id="fileInput" multiple accept=".png" style="display: none;">
            <button class="generate-btn" onclick="document.getElementById('fileInput').click()">
                é€‰æ‹©æ–‡ä»¶
            </button>
        </div>
        
        <div class="file-list" id="fileList"></div>
    </div>
    
    <div class="step">
        <h3>æ­¥éª¤ 3: ç”Ÿæˆä»£ç </h3>
        <p>ä¸Šä¼ æ–‡ä»¶åï¼Œç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®ç”Ÿæˆéœ€è¦çš„ä»£ç ï¼š</p>
        <button class="generate-btn" onclick="generateCode()">
            ç”Ÿæˆæ›´æ–°ä»£ç 
        </button>
        
        <div id="codeOutput"></div>
    </div>

    <script>
        let uploadedFiles = [];
        
        // æ–‡ä»¶ä¸Šä¼ å¤„ç†
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const fileList = document.getElementById('fileList');
        
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });
        
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });
        
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            handleFiles(e.dataTransfer.files);
        });
        
        fileInput.addEventListener('change', (e) => {
            handleFiles(e.target.files);
        });
        
        function handleFiles(files) {
            for (let file of files) {
                if (file.type === 'image/png' && file.name.includes('icon-')) {
                    uploadedFiles.push(file);
                    displayFile(file);
                }
            }
        }
        
        function displayFile(file) {
            const fileItem = document.createElement('div');
            fileItem.className = 'file-item';
            
            const preview = document.createElement('img');
            preview.className = 'file-preview';
            preview.src = URL.createObjectURL(file);
            
            const info = document.createElement('span');
            info.textContent = `${file.name} (${(file.size / 1024).toFixed(1)} KB)`;
            
            fileItem.appendChild(preview);
            fileItem.appendChild(info);
            fileList.appendChild(fileItem);
        }
        
        function generateCode() {
            if (uploadedFiles.length === 0) {
                alert('è¯·å…ˆä¸Šä¼ å›¾æ ‡æ–‡ä»¶ï¼');
                return;
            }
            
            // ç”Ÿæˆ manifest.json æ›´æ–°ä»£ç 
            const manifestIcons = uploadedFiles.map(file => {
                const size = file.name.match(/(\d+)x\d+/)[1];
                return `    {
      "src": "/wordList/icons/${file.name}",
      "sizes": "${size}x${size}",
      "type": "image/png",
      "purpose": "maskable any"
    }`;
            }).join(',\n');
            
            const manifestCode = `// æ›´æ–° public/manifest.json ä¸­çš„ icons éƒ¨åˆ†ï¼š
"icons": [
${manifestIcons}
],`;
            
            // ç”Ÿæˆ index.html æ›´æ–°ä»£ç 
            const indexCode = `// æ›´æ–° index.html ä¸­çš„å›¾æ ‡å¼•ç”¨ï¼š
<link rel="apple-touch-icon" href="/wordList/icons/icon-192x192.png" />
<meta name="msapplication-TileImage" content="/wordList/icons/icon-144x144.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/wordList/icons/icon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="/wordList/icons/icon-16x16.png" />`;
            
            const fullCode = `${manifestCode}

${indexCode}

// æ–‡ä»¶åˆ—è¡¨ (éœ€è¦æ”¾åˆ° public/icons/ ç›®å½•):
${uploadedFiles.map(f => `- ${f.name}`).join('\n')}`;
            
            const codeOutput = document.getElementById('codeOutput');
            codeOutput.innerHTML = `
                <div class="code-output">${fullCode}</div>
                <button class="copy-btn" onclick="copyToClipboard()">å¤åˆ¶ä»£ç </button>
            `;
        }
        
        function copyToClipboard() {
            const codeText = document.querySelector('.code-output').textContent;
            navigator.clipboard.writeText(codeText).then(() => {
                alert('ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            });
        }
    </script>
</body>
</html>
